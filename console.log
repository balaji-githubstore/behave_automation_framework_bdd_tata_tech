@login
Feature: Login # tests/features/login.feature:2
  In order to maintain the patient, doctors records
  As a user
  I want to access the OpenEMR dashboard
  Background:   # tests/features/login.feature:7

  @valid @smoke
  Scenario Outline: Valid Login -- @1.1                            # tests/features/login.feature:19
    Given I have browser with openemr application                  # None
    When I enter username as "physician"                           # None
    And I enter password as "physician"                            # None
    And I select language as "English (Indian)"                    # None
    And I click on login                                           # None
    Then I should get access to the portal with title as "OpenEMR" # None

  @invalid
  Scenario: Invalid Login                                                               # tests/features/login.feature:24
    Given I have browser with openemr application                                       # None
    When I enter username as "john"                                                     # None
    And I enter password as "john123"                                                   # None
    And I select language as "English (Indian)"                                         # None
    And I click on login                                                                # None
    Then I should not get access to portal with error as "Invalid username or password" # None

@patient
Feature: Patient # tests/features/patient.feature:2
  In order to manage the patient details
  As an admin
  I would like to add, edit, delete the patient records
  @addpatient
  Scenario Outline: Add Valid Patient -- @1.1                                            # tests/features/patient.feature:28
    Given I have browser with openemr application                                        # tests/features/steps/login_steps.py:20
    When I enter username as "admin"                                                     # tests/features/steps/login_steps.py:29
    And I enter password as "pass"                                                       # tests/features/steps/login_steps.py:35
    And I select language as "English (Indian)"                                          # tests/features/steps/login_steps.py:41
    And I click on login                                                                 # tests/features/steps/login_steps.py:47
    And I click on patient menu                                                          # tests/features/steps/patient_steps.py:9
      Traceback (most recent call last):
        File "C:\Program Files\Python310\lib\site-packages\behave\model.py", line 1329, in run
          match.run(runner.context)
        File "C:\Program Files\Python310\lib\site-packages\behave\matchers.py", line 98, in run
          self.func(context, *args, **kwargs)
        File "tests\features\steps\patient_steps.py", line 12, in step_impl
          context.main_page.click_on_patient()
        File "C:\Program Files\Python310\lib\site-packages\behave\runner.py", line 321, in __getattr__
          raise AttributeError(msg)
      AttributeError: 'Context' object has no attribute 'main_page'
      
      Captured stdout:
      <selenium.webdriver.chrome.webdriver.WebDriver (session="c9aa230e30046eb2bc0290e8e28d1c5f")>

    And I click on new-search menu                                                       # None
    And I fill the add patient form                                                      # None
      | firstname | lastname | dob        | gender | licence_id |
      | John      | Wick     | 2022-12-27 | Female | Yes        |
    And I click on create new patient                                                    # None
    And I click on confirm create new patient                                            # None
    And I store the alert text and handle it                                             # None
    And I close hbd popup if available                                                   # None
    Then I should get the added patient detail as "Medical Record Dashboard - John Wick" # None
    And I should validate the alert text contains "Tobacco"                              # None


Failing scenarios:
  tests/features/patient.feature:28  Add Valid Patient -- @1.1 

0 features passed, 1 failed, 1 skipped
0 scenarios passed, 1 failed, 2 skipped
5 steps passed, 1 failed, 20 skipped, 0 undefined
Took 0m9.743s
